5.1 计费服务
------------

5.1.1 计费策略
~~~~~~~~~~~~~~

UOS云服务提供\ **按需计费**\ 功能，即用多少付多少。目前，UOS采用的计费策略主要是\ **以时间（秒）为计量单位**\ ，即用多长时间，付多少费用，从资源创建成功的那一刻开始计算其消费情况，每小时初会计算该资源在接下来的一小时内产生的费用，以此类推。若资源在删除时不足一小时，会将一小时中多扣除的费用返还给用户。由于UOS具有\ **秒级响应**\ 的优秀性能，可将计量的时间单位精确到秒，在最大程度上实现“按需计费”的特性，节约不必要的开销。

5.1.2 扣费策略
~~~~~~~~~~~~~~

**UOS采用预扣费策略，即在成功创建资源后，会预先扣去该资源一个小时的费用，然后每个小时会预扣该小时产生的费用，若在某个时间点删除该资源，会将这一个小时中多扣的费用返还到账户余额中。**

举例说明：假设在2016-07-01
14:54:54创建一台云主机，此时计费系统预先扣除了一个小时的费用，然后在2016-07-01
15:58:22删除该云主机，那么该云主机共存在1小时3分28秒。超过一个小时时，我们预先按照2小时扣费，但是在第二个小时中，只使用了3分28秒，系统会将多扣的56分32秒产生的费用返还到账户余额中，同时停止对该资源计费。

**如果对资源的操作进行的操作会引起价格的改变，比如开机/关机云主机，更改配置，公网IP扩容/缩容等，也会对计费进行相应调整。**

5.1.3 欠费处理
~~~~~~~~~~~~~~

对于普通的用户而言，当账户余额为负时，即该账户欠费，一般情况下\ **不允许该用户再创建新的收费资源**\ ，并对其已有的资源进行相应处理（保留和删除）。在创建新用户时，系统会默认赋予相应的权限，如果管理员未指定权限，则按默认权限对用户资源进行处理。UOS云平台将用户level划分为10个，即0～9，分别对应用户对资源的使用和保留情况。如对于level为1的用户来说，当该账户欠费后
，很多资源的保留期限仅是1天，而且欠费后很多操作也是不能被执行的。\ **特别需要强调的一点是对于level为9的用户来说，UOS保有对其所有资源的长期使用权限，即使欠费，也不会对该用户的资源进行删减或者停掉服务的行为。**\ 对欠费账户下已有的收费资源，分别做如下处理：

-  云主机：将现有云主机关机，保留3天，保留期内不收费，且不能进行开机操作；
-  路由器：保留3天，保留期内继续按原来的价格收费，但不能进行关联操作；
-  公网IP：对于通过UOS备案信息验证的公网IP，会保留3天，保留期内继续按原价收费；对于不需备案或备案信息没有通过验证的公网IP，一旦欠费就会立即被释放；
-  硬盘：保留3天，保留期内继续按原来的价格收费，但不能进行关联操作；
-  主机快照：保留3天，不进行处理，保留期内继续按原来的价格收费；
-  硬盘快照：保留3天，不进行处理，保留期内继续按原来的价格收费。

UOS会实时监控用户的消费情况，当发现用户的账户余额不足以支撑未来的消费需求时，\ **会提前7天进行邮件提醒，同时也在控制台的醒目位置用蓝条进行提醒；当用户账户欠费后，会继续进行邮件提醒，将处于保留期内的资源欠费情况发送给用户，同时在控制台中用红条进行提醒**\ 。

5.1.4 计量策略
~~~~~~~~~~~~~~

**该计量策略只是会统计出对应项目的服务的支出情况。**

同如上计费策略一样，UOS对6种资源进行计费，分别是云主机、路由器、云硬盘、主机快照、公网IP、硬盘快照；具体价格均可实现定制。目前对于资源的计费采用按时计费、按需计费。由于UOS具有秒级响应的优秀性能，故可将计量的时间单位精确到秒，在最大程度上实现“按需计费”的特性，节约不必要的开销。

当相应的云资源被创建后，系统便会按照相关计费策略统计资源的消费情况，可以按小时、按天以及按月统计出每个项目的总体消费情况，包括是何种资源产生的消费做出相应的统计，并生成报表，以邮件形式发送到相关邮箱，以便了解项目的消费情况和资源使用情况。从某种程度上讲，可以使用户可以很好的能够控制成本开销。
